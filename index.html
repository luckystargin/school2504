<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Art Events</title>
  <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <link rel="stylesheet" href="css/my.css" />
  <link rel="stylesheet" href="css/all.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/counterup2@2.0.2/dist/index.js"></script>
  <script src="js/jquery-3.7.1.min.js"></script>
  <script src="js/wow.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <link rel="stylesheet" href="MarkerCluster.css" />
  <style>
    .carousel-item.bg-cover {
      position: relative;
      height: 80vh;
      background-size: cover;
      background-position: center;
    }

    .carousel-item.bg-cover::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.15);
 
    }
  </style>
  <script src="js/table.util.js"></script>
</head>

<body>
  <!-- s01navbar -->
  <section id="s01" class="bg-light">
    <div class="container">
      <nav class="navbar navbar-expand-lg bg-light navbar-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">
            <img src="images/gramophone.gif" style="height: 5vh; width: auto" />
          </a>
          <!-- æ¼¢å ¡æ¢ -->
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="artEvents.html">é¦–é </a>
              </li>
              
              <li class="nav-item px-2 d-none" id="s01_order_btn">
                <a class="btn btn-secondary" href="artEvents-admin.html" target="_blank">å¾Œå°ç®¡ç†</a>
              </li>
              <li class="nav-item d-none" id="s01_control_panel_btn">
                <a class="btn btn-secondary" href="artEvents-dashboard-controlPanel_v1.html" target="_blank"
                  id="s01_dashboard_btn">å„€è¡¨æ¿</a>
              </li>
            </ul>
            <div>
              <!-- æœƒå“¡ -->
              <button class="btn navbar-brand d-none" id="s01_member" data-bs-toggle="modal"
                data-bs-target="#memberModal">
                <img src="images/target-audience.gif" style="height: 5vh; width: auto" />
              </button>

              <!-- è³¼ç‰©è»Š -->
              <button class="navbar-brand d-none" id="s01_cart">
                <img src="images/shopping-cart.gif" style="height: 5vh; width: auto" />
              </button>

              <span class="h4 tx-004 fw-900 me-3 d-none" id="s01_username_showtext">æ­¡è¿æœƒå“¡:
                <span class="h3 tx-008" id="s01_username_text">XXX</span></span>


              <button class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#registerModal" id="s01_reg_btn">
                è¨»å†Š
              </button>

              <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#loginModal" id="s01_login_btn">
                ç™»å…¥
              </button>

              <button class="btn btn-warning d-none" id="s01_logout_btn">
                ç™»å‡º
              </button>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </section>

  <!-- s02è¼ªæ’­ -->
  <section id="s02">
    <div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel">
      <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="0" class="active"
          aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="2" aria-label="Slide 3"></button>
        <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="3" aria-label="Slide 4"></button>
      </div>

      <div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel"></div>
      <div class="carousel-inner" style="height: 80vh; width: auto">

        <div class="carousel-item bg-cover active" style="
              height: 80vh;
              background-image: url(images/ni03.jpeg);
              background-attachment: fixed;
            ">
          <div class="carousel-caption d-none d-md-block p-3 rounded-4 shadow-lg"
            style="max-width: 200px; margin: 0 auto"></div>
        </div>
        <div class="carousel-item bg-cover" style="
              height: 80vh;
              background-image: url(images/hp02.jpg);
              background-attachment: fixed;
            ">
          <div class="carousel-caption d-none d-md-block p-3 rounded-4 shadow-lg"
            style="max-width: 200px; margin: 0 auto"></div>
        </div>
        <div class="carousel-item bg-cover" style="
              height: 80vh;
              background-image: url(images/di03.jpg);
              background-attachment: fixed;
            ">
          <div class="carousel-caption d-none d-md-block p-3 rounded-4 shadow-lg"
            style="max-width: 200px; margin: 0 auto"></div>
        </div>
        <div class="carousel-item bg-cover" style="
              height: 100vh;
              background-image: url(images/la02.jpg);
              background-attachment: fixed;
            ">
          <div class="carousel-caption d-none d-md-block p-3 rounded-4 shadow-lg"
            style="max-width: 200px; margin: 0 auto"></div>
        </div>
      </div>
      <button class="carousel-control-prev tx-006" type="button" data-bs-target="#carouselExampleFade"
        data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">ä¸Šä¸€é </span>
      </button>
      <button class="carousel-control-next tx-006" type="button" data-bs-target="#carouselExampleFade"
        data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">ä¸‹ä¸€é </span>
      </button>
    </div>
  </section>

  <section id="s03">
    <div class="container mt-5">
      <div class="row">
        <div class="display-4 fw-900 text-center tx-003">
          è—æ–‡æ´»å‹•ï¼¸è³¼ç¥¨å¹³å°
        </div>
        <div class="h4 text-center tx-002 mt-2">
          è¼•é¬†ç™¼ç¾è—æ–‡æ¨‚è¶£ï¼Œä¸€éµé–‹å•Ÿç¾å¥½é«”é©—ï¼
        </div>

        <br />
        <h5 class="mb-1 text-center mt-3">
          æˆ‘å€‘æä¾›è±å¯Œå¤šå…ƒçš„ è—æ–‡æ´»å‹•è³‡è¨Š åŠ è³¼ç¥¨æœå‹™
          <br />ç”¨æˆ¶å¯ä»¥æ‚ é–’æ¢ç´¢å„ç¨®æœ‰è¶£ä¸»é¡Œï¼Œ
          <br />ä¸€éµè³¼ç¥¨è¶…æ–¹ä¾¿ï¼Œçœæ™‚åˆçœåŠ›ï¼
          <br />è¼•é¬†å®‰æ’å°ˆå±¬è¡Œç¨‹ï¼Œé–‹å•Ÿä¸€å ´å ´ é›£å¿˜çš„ç²¾å½©å†’éšªï¼
        </h5>
      </div>
    </div>
    <div class="mt-5 container-fluid">
      <div class="display-4 fw-900 text-center my-3 tx-004">æŸ¥è©¢è—æ–‡æ´»å‹•</div>
      <div class="row justify-content-center">
        <div class="col-md-6">
          <select name="selectCity_arts" id="selectCity_arts" class="form-select form-select-lg mt-4">
            <option value="" class="text-center" selected disabled>
              ---é¸æ“‡ç¸£å¸‚åç¨±---
            </option>
            <option value="å°ä¸­å¸‚">å°ä¸­å¸‚</option>
          </select>
          <select name="selectArea" id="selectArea" class="form-select form-select-lg mt-3">
            <option value="" class="text-center" selected disabled>
              ---é¸æ“‡é„‰é®å€åç¨±---
            </option>
            <option value="è¥¿å±¯å€">è¥¿å±¯å€</option>
          </select>
        </div>
      </div>

      <div class="row my-3 mx-5 justify-content-evenly" id="artslist">
        <div class="card mb-3 shadow col-md-6">
          <div class="row g-0">
            <div class="col-md-4">
              <img src="images/exh02.png" class="img-fluid rounded-start mt-2" alt="å±•è¦½åœ–ç‰‡" />
            </div>
            <div class="col-md-8">
              <div class="card-body">
                <h5 class="card-title text-danger fw-bold">å±•è¦½: xxx</h5>
                <h6 class="fw-bold">åœ°é»: xxx</h6>
                <p class="fw-bold">åœ°å€: xxx</p>
                <p>
                  <small class="badge bg-003 wow animate__heartBeat" data-wow-duration="1s" data-wow-delay="0s"
                    data-wow-iteration="infinite">é™æ™‚å„ªæƒ </small>
                  <span>(å€’æ•¸æ™‚é–“)</span>
                </p>
                <div class="d-flex justify-content-end">

                  <a class="btn btn-outline-info btn-sm" href="artEvents-product.html?id=123456">æŸ¥çœ‹æ›´å¤š
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- registerModal -->
  <div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <!-- modal-xl é•·çš„è¼¸å…¥æ¡† -->
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <!-- åŒæŒ‰éˆ•é¡è‰² -->
        <div class="modal-header text-bg-warning">
          <h1 class="modal-title fs-4 fw-900" id="exampleModalLabel">
            æœƒå“¡è¨»å†Š
          </h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="mb-3">
              <label for="" class="form-label">å¸³è™Ÿ</label>
              <input type="text" class="form-control" id="username_reg" name="username_reg" placeholder="3-6å­—æ•¸" />
              <div class="valid-feedback" id="regModal_username_valid_feedback">
                ç¬¦åˆè¦å‰‡
              </div>
              <div class="invalid-feedback" id="regModal_username_invalid_feedback">
                ä¸ç¬¦åˆè¦å‰‡
              </div>
            </div>
            <div class="mb-3">
              <label for="" class="form-label">å¯†ç¢¼</label>
              <input type="password" class="form-control" id="password_reg" name="password_reg" placeholder="3-6å­—æ•¸" />
              <div class="valid-feedback">ç¬¦åˆè¦å‰‡</div>
              <div class="invalid-feedback">ä¸ç¬¦åˆè¦å‰‡</div>
            </div>
            <div class="mb-3">
              <label for="" class="form-label">ç¢ºèªå¯†ç¢¼</label>
              <input type="password" class="form-control" id="re_password_reg" name="re_password_reg" />
              <div class="valid-feedback">ç¬¦åˆè¦å‰‡</div>
              <div class="invalid-feedback">ä¸ç¬¦åˆè¦å‰‡</div>
            </div>

            <div class="mb-3 input-group">
              <label for="" class="form-label">Email</label>
              <div class="input-group">
                <input type="text" class="form-control" placeholder="3-10å­—æ•¸" id="email_reg" name="email_reg" />

                <div class="valid-feedback">ç¬¦åˆè¦å‰‡</div>
                <div class="invalid-feedback">ä¸ç¬¦åˆè¦å‰‡</div>
              </div>
            </div>
            <div class="mb-3">
              <label for="" class="form-label">æ€§åˆ¥</label>
              <div class="d-block">
                <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="male" name="gender" value="male" />
                  <label for="" class="form-check-label">male</label>
                </div>

                <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="female" name="gender" value="female" />
                  <label for="" class="form-check-label">female</label>
                </div>
              </div>

              <div class="valid-feedback">ç¬¦åˆè¦å‰‡</div>
              <div class="invalid-feedback">ä¸ç¬¦åˆè¦å‰‡</div>
            </div>

            <div class="mb-3">
              <label for="" class="form-label">å¹´é½¡</label>
              <div class="d-block">
                <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="under18" name="age" value="under18" />
                  <label for="" class="form-check-label">18ä»¥ä¸‹</label>
                </div>
                <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="18_28" name="age" value="18_28" />
                  <label for="" class="form-check-label">18-28</label>
                </div>
                <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="29_40" name="age" value="29_40" />
                  <label for="" class="form-check-label">29-40</label>
                </div>
                <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="41_64" name="age" value="41_64" />
                  <label for="" class="form-check-label">41-64</label>
                </div>

                <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="65plus" name="age" value="65plus" />
                  <label for="" class="form-check-label">65ä»¥ä¸Š</label>
                </div>
              </div>

              <div class="valid-feedback">ç¬¦åˆè¦å‰‡</div>
              <div class="invalid-feedback">ä¸ç¬¦åˆè¦å‰‡</div>
            </div>

            <div class="mb-3">
              <label for="" class="select-label">å±…ä½åœ°</label>
              <select name="selectCity_add" id="selectCity_add" class="form-select mt-2">
                <option value="" class="text-center" selected disabled>
                  ---é¸æ“‡å±…ä½åœ°---
                </option>
                <option value="">å°ä¸­å¸‚</option>
              </select>
              <div class="valid-feedback">ç¬¦åˆè¦å‰‡</div>
              <div class="invalid-feedback">ä¸ç¬¦åˆè¦å‰‡</div>
            </div>
            <div class="mb-3">
              <label for="" class="form-label">å¹´æ”¶å…¥</label>
              <div class="form-check">
                <input type="radio" class="form-check-input" id="under39" name="income" value="under39" />
                <label for="" class="form-check-label">å¹´æ”¶39è¬ä»¥ä¸‹</label>
              </div>
              <div class="form-check">
                <input type="radio" class="form-check-input" id="40_69" name="income" value="40_69" />
                <label for="" class="form-check-label">å¹´æ”¶40-69è¬</label>
              </div>
              <div class="form-check">
                <input type="radio" class="form-check-input" id="70_99" name="income" value="70_99" />
                <label for="" class="form-check-label">å¹´æ”¶70-99è¬</label>
              </div>
              <div class="form-check">
                <input type="radio" class="form-check-input" id="100_199" name="income" value="100_199" />
                <label for="" class="form-check-label">å¹´æ”¶100-199è¬</label>
              </div>

              <div class="form-check">
                <input type="radio" class="form-check-input" id="200plus" name="income" value="200plus" />
                <label for="" class="form-check-label">å¹´æ”¶200è¬ä»¥ä¸Š</label>
              </div>
              <div class="valid-feedback">ç¬¦åˆè¦å‰‡</div>
              <div class="invalid-feedback">ä¸ç¬¦åˆè¦å‰‡</div>
            </div>

            <div class="mb-3">
              <div class="form-check form-switch mt-auto">
                <input type="checkbox" class="form-check-input is-invalid" role="switch" id="chk01" name="chk01" />
                <label for="chk01" class="form-check-label">ä¸åŒæ„</label>

                <div class="valid-feedback">.</div>
                <div class="invalid-feedback">é ˆåŒæ„å§‹èƒ½è¨»å†Š!</div>
              </div>
            </div>

            <div class="modal-footer justify-content-center">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                å–æ¶ˆ
              </button>
              <button type="button" class="btn btn-info text-white" id="ok_btn_reg">
                é€å‡º
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <!-- modal-xl é•·çš„è¼¸å…¥æ¡† -->
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <!-- åŒæŒ‰éˆ•é¡è‰² -->
        <div class="modal-header text-bg-success">
          <h1 class="modal-title fs-4 fw-900" id="loginModalLabel">
            æœƒå“¡ç™»å…¥
          </h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="mb-3">
              <label for="" class="form-label">å¸³è™Ÿ</label>
              <input type="text" class="form-control" id="username_login" name="username_login" placeholder="è«‹è¼¸å…¥å¸³è™Ÿ"
                required />
              <div class="valid-feedback">ç¬¦åˆè¦å‰‡</div>
              <div class="invalid-feedback">ä¸ç¬¦åˆè¦å‰‡</div>
            </div>
            <div class="mb-3">
              <label for="" class="form-label">å¯†ç¢¼</label>
              <input type="password" class="form-control" id="password_login" name="password_login" placeholder="è«‹è¼¸å…¥å¯†ç¢¼"
                required />
              <div class="valid-feedback">ç¬¦åˆè¦å‰‡</div>
              <div class="invalid-feedback">ä¸ç¬¦åˆè¦å‰‡</div>
            </div>
            <div class="modal-footer justify-content-center">
              <button type="button" class="btn btn-secondary text-white" data-bs-dismiss="modal">
                å–æ¶ˆ
              </button>
              <button type="button" class="btn btn-info text-white" id="ok_btn_log">
                é€å‡º
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="memberModal" tabindex="-1" aria-labelledby="memberModalLabel" aria-hidden="true">
    <!-- modal-xl é•·çš„è¼¸å…¥æ¡† -->
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <!-- åŒæŒ‰éˆ•é¡è‰² -->
        <div class="modal-header text-bg-warning">
          <h1 class="modal-title fs-4 fw-900 text-white" id="memberModalLabel">
            xxxçš„è¨‚å–®æ˜ç´°
            <br />ç­‰ç´š:xxx
          </h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="mb-3">
              <div class="col-12">
                <table class="table shadow-lg mt-2 table-rwd">
                  <thead>
                    <tr>
                      <th>å»ºå–®æ™‚é–“</th>
                      <th>è¨‚å–®ç·¨è™Ÿ</th>
                      <th>ç”¢å“ç·¨è™Ÿ</th>
                      <th>å•†å“æ•¸é‡</th>
                      <th>å•†å“å–®åƒ¹</th>
                      <th>æœƒå“¡ç­‰ç´š</th>
                      <th>æœƒå“¡æŠ˜æ‰£</th>
                      <th>å•†å“ç¸½é¡</th>
                      <th>æŠ˜æ‰£é‡‘é¡</th>
                      <th>è¨‚å–®ç¸½é¡</th>
                      <th>è¨‚å–®ç‹€æ…‹</th>
                    </tr>
                  </thead>
                  <tbody id="myorder">
                    <tr>
                      <td data-th="å»ºå–®æ™‚é–“">xx</td>
                      <td data-th="è¨‚å–®ç·¨è™Ÿ">xx</td>
                      <td data-th="ç”¢å“ç·¨è™Ÿ">xx</td>
                      <td data-th="å•†å“æ•¸é‡">xx</td>
                      <td data-th="å•†å“å–®åƒ¹">xx</td>
                      <td data-th="æœƒå“¡ç­‰ç´š">xx</td>
                      <td data-th="æœƒå“¡æŠ˜æ‰£">xx</td>
                      <td data-th="å•†å“ç¸½é¡">xx</td>
                      <td data-th="æŠ˜æ‰£é‡‘é¡">xx</td>
                      <td data-th="è¨‚å–®ç¸½é¡">xx</td>
                      <td data-th="è¨‚å–®ç‹€æ…‹">xx</td>
                    </tr>
                  </tbody>
                </table>
                <div class="d-flex justify-content-between align-items-center flex-wrap mt-3">
                  <!-- æ¯é ç­†æ•¸é¸æ“‡ -->
                  <div class="d-flex align-items-center">
                    <label for="perPageSelect" class="me-2 mb-0">æ¯é é¡¯ç¤ºç­†æ•¸ï¼š</label>
                    <select id="perPageSelect" class="form-select w-auto">
                      <option value="1">1 ç­†</option>
                      <option value="5">5 ç­†</option>
                      <option value="10" selected>10 ç­†</option>
                      <option value="20">20 ç­†</option>
                      <option value="50">50 ç­†</option>
                    </select>
                  </div>

                  <!-- åˆ†é å€å¡Š -->
                  <div id="pagination" class="mt-2 mt-md-0"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

  <script>
    // new WOW().init();
    new WOW();
  </script>


  <script>
    var allCityData_add; //æ‰€æœ‰ç¸£å¸‚è³‡æ–™
    var selectCity_add; //è¨»å†Šç”¨å±…ä½åœ°
    var allarts; //æ‰€æœ‰è—æ–‡è³‡æ–™

    var allCityData_arts; //æ‰€æœ‰ç¸£å¸‚è³‡æ–™
    var selectCity_arts; //æ´»å‹•ç”¨ç¸£å¸‚
    var selectArea; //æ´»å‹•ç”¨é„‰é®

    var flag_username_reg = false;
    var flag_password_reg = false;
    var flag_re_password_reg = false;
    var flag_email_reg = false;
    var flag_gender = false;
    var flag_age = false;
    var flag_selectCity_add = false;
    var flag_income = false;

    var flag_username_login = false;
    var flag_password_login = false;

    $(function () {

      $.ajax({
        type: "GET",
        url: "https://url/porduct_control.php?action=get_all",
        dataType: "json",
        success: function (dbResult) {
          console.log(dbResult);
          allarts = dbResult.data;
          console.log(allarts);
        },
        error: function () {
          Swal.fire({
            title: "APIä»‹æ¥éŒ¯èª¤?",
            text: "https://url/porduct_control.php?action=get_all",
            icon: "error",
          });
        },
      });

      // å±…ä½åœ°é¸å–®-ç¸£å¸‚è³‡æ–™
      $.ajax({
        type: "GET",
        url: "js/CityCountyData.json",
        dataType: "json",
        success: function (data) {
          console.log(data);
          allCityData_add = data;
          console.log(allCityData_add);

          // é¡¯ç¤ºå±…ä½åœ°é¸å–®
          $("#selectCity_add").empty();
          $("#selectCity_add").append(
            ' <option value="" class="text-center" selected disabled>---é¸æ“‡å±…ä½åœ°---</option>'
          );
          data.forEach(function (item) {
            var strHTML = `<option value="${item.CityName}">${item.CityName}</option>`;
            $("#selectCity_add").append(strHTML);
          });
        },
        error: function () {
          Swal.fire({
            title: "APIä»‹æ¥éŒ¯èª¤?",
            text: "js/CityCountyData.json",
            icon: "error",
          });
        },
      });

      // é¡¯ç¤ºæ´»å‹•çš„ç¸£å¸‚é¸å–®
      $.ajax({
        type: "GET",
        url: "js/CityCountyData.json",
        dataType: "json",
        async: false,
        success: function (data) {
          console.log(data);
          allCityData_arts = data;
          console.log(allCityData_arts);

          // é¡¯ç¤ºå±…ä½åœ°é¸å–®
          $("#selectCity_arts").empty();
          $("#selectCity_arts").append(
            ' <option value="" class="text-center" selected disabled>---é¸æ“‡ç¸£å¸‚åç¨±---</option>'
          );
          data.forEach(function (item) {
            var strHTML = `<option value="${item.CityName}">${item.CityName}</option>`;
            $("#selectCity_arts").append(strHTML);
          });
        },
        error: function () {
          Swal.fire({
            title: "APIä»‹æ¥éŒ¯èª¤?",
            text: "js/CityCountyData.json",
            icon: "error",
          });
        },
      });

      //ç›£è½æ´»å‹•çš„ç¸£å¸‚é¸å–®
      $("#selectCity_arts").change(function () {
        console.log($(this).val());
        selectCity_arts = $(this).val();

        //éæ¿¾æ‰€é¸å–çš„ç¸£å¸‚åç¨±, ä¸¦æ‰¾å‡ºè©²é„‰é®å€çš„è³‡æ–™
        allCityData_arts.forEach(function (item) {
          if (item.CityName == selectCity_arts) {
            $("#selectArea").empty();
            $("#selectArea").append(
              '<option value="" class="text-center" selected disabled>---é¸æ“‡é„‰é®å€åç¨±---</option>'
            );
            item.AreaList.forEach(function (itemarea) {
              console.log(itemarea.AreaName);
              //ç”¢ç”Ÿé„‰é®å€é¸å–®
              var strHTML = `<option value="${itemarea.AreaName}">${itemarea.AreaName}</option>`;
              $("#selectArea").append(strHTML);
            });
          }
        });
      });
      //ç›£è½é„‰é®å€é¸å–®
      $("#selectArea").change(function () {
        selectArea = $(this).val();
        console.log("allarts", allarts);
        console.log("selectArea", $(this).val());
        console.log("selectCity_arts", selectCity_arts);

        if (!selectCity_arts || !selectArea) {
          return;
        }



        $("#artslist").empty();
        allarts
          .filter((item) => {
            return item.showInfo[0].location.startsWith(
              selectCity_arts + selectArea
            );
          })
          .sort((a, b) => {
            return new Date(a.startDate) - new Date(b.startDate);
          })
          .forEach((item) => {
            // console.log(item);
            const diffDays = countDown(item.startDate);

            if (diffDays < 1) {
              return;
            }

            var strHtml = `
                <div class="card mb-3 shadow col-md-5">
                <div class="row g-0">
                    <div class="col-md-4">
                    <img src="images/exh02.png" class="img-fluid rounded-start mt-2" style="max-width: 100%" alt="å±•è¦½åœ–ç‰‡">
                    </div>
                    <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title text-danger fw-bold"> ${item.title}</h5>
                        <h6 class="fw-bold">åœ°é»: ${item.showInfo[0].locationName}</h6>
                        <p class="fw-bold">åœ°å€: ${item.showInfo[0].location}</p>
                        <p><small class="badge bg-003 wow animate__heartBeat" data-wow-duration="1s" data-wow-delay="0s"
                        data-wow-iteration="infinite">é™æ™‚å„ªæƒ </small>
                        <span class="h3 fw-900">å€’æ•¸: <span class="text-danger">${diffDays}</span> å¤©</span></p>
                        <div class="d-flex justify-content-end">
                        <a class="btn btn-outline-info btn-sm" href="artEvents-product.html?id=${item.UID}">æŸ¥çœ‹æ›´å¤š
                            </a></div>

                    </div>
                    </div>
                </div>
                </div>
                `;
            $("#artslist").append(strHtml);
          });
      });
    });

    if (getCookie("Uid01")) {
      //å°‡uid01å‚³éè‡³å¾Œç«¯APIåŸ·è¡Œé©—è­‰
      //input {"uid01" : "***"}
      var JSONdata = {};
      JSONdata["uid01"] = getCookie("Uid01");
      console.log(JSON.stringify(JSONdata));

      $.ajax({
        type: "POST",
        url: "https://url/artEvents-member_control_api_v2.php?action=checkuid",
        data: JSON.stringify(JSONdata),
        dataType: "json",
        success: showdata_checkuid,
        error: function () {
          Swal.fire({
            title: "APIä»‹æ¥éŒ¯èª¤?",
            text: "artEvents-member_control_api_v2.php?action=checkuid",
            icon: "error",
          });
        },
      });
    }

    $(function (data) {
      //å³æ™‚ç›£è½username_reg
      // å³æ™‚ç›£è½username_reg
      $("#username_reg").bind("input propertychange", function () {
        // æ¸…é™¤ä¹‹å‰è¨­å®šçš„è¨ˆæ™‚å™¨
        clearTimeout($.data(this, "timer"));
        // è¨­å®šæ–°çš„è¨ˆæ™‚å™¨
        var wait = setTimeout(() => {
          // æª¢æŸ¥è¼¸å…¥çš„å¸³è™Ÿé•·åº¦æ˜¯å¦ç¬¦åˆè¦å‰‡
          const userNameLength = $(this).val().length;
          // ä¸ç¬¦åˆè¦å‰‡æ™‚ï¼Œé¡¯ç¤ºéŒ¯èª¤æ¨£å¼
          if (userNameLength < 2 || userNameLength > 7) {
            $(this).removeClass("is-valid");
            $(this).addClass("is-invalid");
            $("#regModal_username_invalid_feedback").text(
              "å¸³è™Ÿé•·åº¦éœ€ä»‹æ–¼3-6å­—æ•¸"
            );
            flag_username_reg = false;
            return;
          }
          $.ajax({
            type: "POST",
            url: "https://url/artEvents-member_control_api_v2.php?action=checkuni",
            data: JSON.stringify({ username: $(this).val() }),
            dataType: "json",
            success: (data) => {
              if (data.state) {
                // å¸³è™Ÿä¸å­˜åœ¨ï¼Œå¯ä»¥ä½¿ç”¨
                $("#username_reg").removeClass("is-invalid");
                $("#username_reg").addClass("is-valid");
                $("#regModal_username_valid_feedback").text(data.message);
                flag_username_reg = true;
              } else {
                // å¸³è™Ÿå·²å­˜åœ¨ä¸å¯ä»¥ä½¿ç”¨
                $("#username_reg").removeClass("is-valid");
                $("#username_reg").addClass("is-invalid");
                $("#regModal_username_invalid_feedback").text(data.message);
                flag_username_reg = true;
              }
            },
            error: function () {
              Swal.fire({
                title: "APIä»‹æ¥éŒ¯èª¤",
                text: "https://url/artEvents-member_control_api_v2.php?action=checkuni",
                icon: "error",
              });
            },
          });
        }, 1000); 
        // å„²å­˜è¨ˆæ™‚å™¨
        $(this).data("timer", wait);
      });

      //å³æ™‚ç›£è½password_reg
      $("#password_reg").bind("input propertychange", function () {
        $("#re_password_reg").removeClass("is-valid");
        $("#re_password_reg").addClass("is-invalid");
        flag_re_password_reg = false;

        if ($(this).val().length > 2 && $(this).val().length < 7) {
          $(this).removeClass("is-invalid");
          $(this).addClass("is-valid");
          flag_password_reg = true;
        } else {
          $(this).removeClass("is-valid");
          $(this).addClass("is-invalid");
          flag_password_reg = false;
        }
      });

      //å³æ™‚ç›£è½re_password_reg
      $("#re_password_reg").bind("input propertychange", function () {
        if (flag_password_reg && $(this).val() === $("#password_reg").val()) {
          $(this).removeClass("is-invalid");
          $(this).addClass("is-valid");
          flag_re_password_reg = true;
        } else {
          $(this).removeClass("is-valid");
          $(this).addClass("is-invalid");
          flag_re_password_reg = false;
        }
      });

      //å³æ™‚ç›£è½email_reg
      $("#email_reg").bind("input propertychange", function () {
        if ($(this).val().length > 2 && $(this).val().length < 11) {
          $(this).removeClass("is-invalid");
          $(this).addClass("is-valid");
          flag_email_reg = true;
        } else {
          $(this).removeClass("is-valid");
          $(this).addClass("is-invalid");
          flag_email_reg = false;
        }
      });

      //å³æ™‚ç›£è½gender
      $("input[name='gender']").ready(function () {
        $("input[name='gender']").change(function () {
          $("input[name='gender']")
            .removeClass("is-invalid")
            .addClass("is-valid");
          flag_gender = true;
        });
      });

      //å³æ™‚ç›£è½age
      $("input[name='age']").ready(function () {
        $("input[name='age']").change(function () {
          $("input[name='age']")
            .removeClass("is-invalid")
            .addClass("is-valid");
          flag_age = true;
        });
      });

      //å³æ™‚ç›£è½ #selectCity_add
      $("#selectCity_add").bind("input propertychange", function () {
        if ($(this).val() != "") {
          $(this).removeClass("is-invalid");
          $(this).addClass("is-valid");
          flag_selectCity_add = true;
        }
      });

      //å³æ™‚ç›£è½income
      $("input[name='income']").ready(function () {
        $("input[name='income']").change(function () {
          $("input[name='income']")
            .removeClass("is-invalid")
            .addClass("is-valid");
          flag_income = true;
        });
      });
    });

    //ok_btn_regï¼Œè¨»å†ŠæŒ‰éˆ•ç›£è½
    $("#ok_btn_reg").click(function () {
      var JSONdata = {};
      JSONdata["username"] = $("#username_reg").val();
      JSONdata["password"] = $("#password_reg").val();
      JSONdata["email"] = $("#email_reg").val();
      JSONdata["gender"] = $("input[name='gender']:checked").val();
      JSONdata["age"] = $("input[name='age']:checked").val();
      JSONdata["city"] = $("#selectCity_add").val();
      JSONdata["income"] = $("input[name='income']:checked").val();
      console.log(JSON.stringify(JSONdata));

      const url =
        "https://url/artEvents-member_control_api_v2.php?action=register";

      $.ajax({
        type: "POST",
        url: url,
        data: JSON.stringify(JSONdata),
        dataType: "json",
        success: showdata_reg, 
        error: function () {
          // sweetalert
          Swal.fire({
            title: "APIä»‹æ¥éŒ¯èª¤",
            text: url,
            icon: "error",
          });
        },
      });
    });

    function showdata_reg(data) {
      console.log(data);
      if (data.state) {
        Swal.fire({
          title: data.message,
          icon: "success",
        }).then((result) => {
          if (result.isConfirmed) {
            location.reload();
          }
        });
      } else {
        Swal.fire({
          title: data.message,
          icon: "error",
        });
      }
    }

    // è¨ˆç®—å€’æ•¸æ™‚é–“(å¤©)
    function countDown(date) {
      var now = new Date();
      var end = new Date(date);
      var diff = end - now;
      return Math.floor(diff / (1000 * 60 * 60 * 24));
    }

    // ç™»å…¥é©—è­‰
    $(function () {
      let username = "";
      let password = "";
      //å³æ™‚ç›£è½username_login
      $("#username_login").bind("input propertychange", function () {
        if (!$(this).val()) return;
        username = $(this).val();
      });

      //å³æ™‚ç›£è½password_login
      $("#password_login").bind("input propertychange", function () {
        if (!$(this).val()) return;
        password = $(this).val();
      });

      //æŒ‰éˆ•ç›£è½ok_btn_log
      $("#ok_btn_log").click(function () {
        if (!username || !password) {
          Swal.fire({
            title: "è¼¸å…¥éŒ¯èª¤!",
            text: "è«‹è¼¸å…¥å¸³è™Ÿå’Œå¯†ç¢¼!",
            icon: "error",
          });
          return;
        }

        var JSONdata = {};
        JSONdata["username"] = $("#username_login").val();
        JSONdata["password"] = $("#password_login").val();
        console.log(JSON.stringify(JSONdata));
        $.ajax({
          type: "POST",
          url: "https://url/artEvents-member_control_api_v2.php?action=login",
          data: JSON.stringify(JSONdata),
          dataType: "json",
          success: (data) => {
            console.log(data);
            if (!data.state) {
              Swal.fire({
                title: data.message,
                text: "å¦‚æœ‰å•é¡Œè«‹æ´½å®¢æœğŸ©µ",
                icon: "error",
                allowOutsideClick: false,
              });
              return;
            }

            Swal.fire({
              title: data.message,
              icon: "success",
              allowOutsideClick: false,
            }).then((result) => {
              if (result.isConfirmed) {
                // loginModal æ¶ˆå¤±
                $("#loginModal").modal("hide");

                // é¡¯ç¤ºæ­¡è¿è¨Šæ¯
                $("#s01_username_showtext").removeClass("d-none");
                $("#s01_username_text").text(data.data.Username);

                // é¡¯ç¤ºç™»å‡ºæŒ‰éˆ•
                $("#s01_logout_btn").removeClass("d-none");

                ///é¡¯ç¤ºæ§åˆ¶å°æŒ‰éˆ•
                $("#s01_order_btn").removeClass("d-none");

                ///é¡¯ç¤ºå„€è¡¨æ¿
                $("#s01_control_panel_btn").removeClass("d-none");

                ///é¡¯ç¤ºæœƒå“¡
                $("#s01_member").removeClass("d-none");

                // ///é¡¯ç¤ºè³¼ç‰©è»Š
                // $("#s01_cart").removeClass("d-none");

                ///é¡¯ç¤ºçµ±è¨ˆåœ–æŒ‰éˆ•
                $("#s02_count_btn").removeClass("d-none");

                // éš±è—è¨»å†Šèˆ‡ç™»å…¥æŒ‰éˆ•
                $("#s01_reg_btn").addClass("d-none");
                $("#s01_login_btn").addClass("d-none");

                // uidé©—è­‰ç¢¼å¯«å…¥cookie
                // 7ç‚ºå­˜æ´»æ™‚é–“
                setCookie("Uid01", data.data.Uid01, 7);
                window.location.reload();
              }
            });
          },
          error: function () {
            Swal.fire({
              title: "APIä»‹æ¥éŒ¯èª¤?",
              text: "artEvents-member_control_api_v2.php?action=login",
              icon: "error",
              allowOutsideClick: false,
            });
          },
        });
      });

      // s01_logout_btnæŒ‰éˆ•ç›£è½
      $("#s01_logout_btn").click(function () {
        setCookie("Uid01", "", 7);
        location.href = "artEvents.html";
      });
    });


    function showdata_checkuid(data) {
      console.log(data);

      //  è‹¥æ”¹cookie
      if (!data.state || !data.data.Username) {
        Swal.fire({
          title: "éº¥ä½‡éæ‰‹è³¤ <br> Hands off!",
          icon: "error",
          allowOutsideClick: false,
        });
        return;
      }

      // é¡¯ç¤ºæ­¡è¿è¨Šæ¯
      $("#s01_username_showtext").removeClass("d-none");
      $("#s01_username_text").text(data.data.Username);

      // é¡¯ç¤ºç™»å‡ºæŒ‰éˆ•
      $("#s01_logout_btn").removeClass("d-none");

      ///é¡¯ç¤ºæœƒå“¡
      $("#s01_member").removeClass("d-none");

      // ///é¡¯ç¤ºè³¼ç‰©è»Š
      // $("#s01_cart").removeClass("d-none");

      ///é¡¯ç¤ºçµ±è¨ˆåœ–æŒ‰éˆ•
      $("#s02_count_btn").removeClass("d-none");

      // è©²æœƒå“¡è³‡æ–™çš„æ¨™é¡Œ
      $("#memberModalLabel").empty();
      $("#memberModalLabel").append(
        ` è¨‚å–®æ˜ç´°
            <br />${data.data.Username} ç›®å‰ç­‰ç´š: ${data.data.Level} `
      );

      // éš±è—è¨»å†Šèˆ‡ç™»å…¥æŒ‰éˆ•
      $("#s01_reg_btn").addClass("d-none");
      $("#s01_login_btn").addClass("d-none");

      if (data.data.Username === "admin") {
        ///é¡¯ç¤ºæ§åˆ¶å°æŒ‰éˆ•
        $("#s01_order_btn").removeClass("d-none");

        ///é¡¯ç¤ºå„€è¡¨æ¿
        $("#s01_control_panel_btn").removeClass("d-none");
      }
    }

    $("#s01_member").click(() => {
      setOrderData();
    });

    function setOrderData(page = 1, limit = currentLimit) {
      const url = `https://url/order_control_v2.php?action=get_all_by_user&page=${page}&limit=${limit}`;

      $.ajax({
        type: "GET",
        url: url,
        headers: {
          "Content-Type": "application/json",
          "api-user-id": getCookie("Uid01"),
        },
        dataType: "json",
        async: false,
        success: (response) => {
          showdata_get_all_by_user(response);
          renderPagination(response.data.pagination);
        },
        error: function (e) {
          Swal.fire({
            title: "APIä»‹æ¥éŒ¯èª¤?",
            text: `url:${url} error:${e}`,
            icon: "error",
          });
        },
      });
    }

    // è¼‰å…¥æ‰€æœ‰æœƒå“¡è³‡æ–™
    function showdata_get_all_by_user(response) {
      $("#myorder").empty();

      const data = response.data.data;

      data.forEach(function (item) {
        const statusBadge = (() => {
          switch (item.status) {
            case "0":
              return setBadge("å»ºç«‹ä¸­", "primary");
            case "1":
              return setBadge("å·²æˆç«‹", "success");
            case "-1":
              return setBadge("å·²å–æ¶ˆ", "warning");
            default:
              return setBadge("æœªçŸ¥", "danger");
          }
        })();
        var strHTML = `<tr>
                        <td data-th="å»ºå–®æ™‚é–“">${item.created_at}</td>
                        <td data-th="è¨‚å–®ç·¨è™Ÿ">${item.id}</td>
                        <td data-th="ç”¢å“ç·¨è™Ÿ">${item.products_id}</td>
                        <td data-th="å•†å“æ•¸é‡">${item.quantity}</td>
                        <td data-th="å•†å“å–®åƒ¹">${item.unit_price}</td>
                        <td data-th="æœƒå“¡ç­‰ç´š">${item.level}</td>
                        <td data-th="æœƒå“¡æŠ˜æ‰£">${item.discount}</td>
                        <td data-th="å•†å“ç¸½é¡">${item.original_amount}</td>
                        <td data-th="æŠ˜æ‰£é‡‘é¡">${item.discount_amount}</td>
                        <td data-th="è¨‚å–®ç¸½é¡">${item.amount}</td>
                        <td data-th="è¨‚å–®ç‹€æ…‹">${statusBadge}</td>
                        </tr>`;

        $("#myorder").append(strHTML);
      });
    }

    // from w3s
    function setCookie(cname, cvalue, exdays) {
      const d = new Date();
      d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);
      let expires = "expires=" + d.toUTCString();
      document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }

    function getCookie(cname) {
      let name = cname + "=";
      let ca = document.cookie.split(";");
      for (let i = 0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) == " ") {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }
  </script>
</body>

</html>